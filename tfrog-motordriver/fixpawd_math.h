/* ----------------------------------------------------------------------------
 * Copyright 2011-2019 T-frog Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ----------------------------------------------------------------------------
 */

/**
	@file fixpawd_math.c
	@brief Fixed point value mathmatical functions
 */

#ifndef __FIX_POINT_AWD_MATH__
#define __FIX_POINT_AWD_MATH__

#include "fixpawd.h"

#define FP4_PI DOUBLE2FP4(3.1415926535897932384626433832795)
#define FP4_PI2 DOUBLE2FP4(3.1415926535897932384626433832795 * 2.0)
#define FP4_PI3_4 DOUBLE2FP4(3.1415926535897932384626433832795 * 3.0 / 4.0)
#define FP4_PI_2 DOUBLE2FP4(3.1415926535897932384626433832795 / 2.0)
#define FP4_PI_4 DOUBLE2FP4(3.1415926535897932384626433832795 / 4.0)
#define FP4_PI_6 DOUBLE2FP4(3.1415926535897932384626433832795 / 6.0)
#define FP4_E DOUBLE2FP4(2.718281828459045235360287471352)
#define FP4_LOG2E DOUBLE2FP4(1.0 / 1.4426950408889634073599246810022)
#define FP4_LOG2T DOUBLE2FP4(1.0 / 3.3219280948873623478703194294948)

fixp4 fp4sinf(fixp4 x);
fixp4 fp4cosf(fixp4 x);
fixp4 fp4sin(fixp4 x);
fixp4 fp4cos(fixp4 x);
fixp4 fp4atan(fixp4 x);
fixp4 fp4atan2(fixp4 y, fixp4 x);
fixp4 fp4sqrt(fixp4 x);
fixp4 fp4sqrtf(fixp4 x);
fixp4 fp4sqrtinv(fixp4 x);
fixp4 fp4log2(fixp4 x);
fixp4 fp4ln(fixp4 x);
fixp4 fp4log(fixp4 x);
fixp4 fp4logn(fixp4 x, fixp4 n);
fixp4 fp4log2f(fixp4 x);
fixp4 fp4lnf(fixp4 x);
fixp4 fp4logf(fixp4 x);
fixp4 fp4lognf(fixp4 x, fixp4 n);
fixp4 fp4exp(fixp4 x);

/** Table for calc exp */
static const fixp4 fp4_exp[36] = {
  DOUBLE2FP4(1.0000000004656613),
  DOUBLE2FP4(1.0000000009313226),
  DOUBLE2FP4(1.0000000018626451),
  DOUBLE2FP4(1.0000000037252903),
  DOUBLE2FP4(1.0000000074505806),
  DOUBLE2FP4(1.0000000149011612),
  DOUBLE2FP4(1.0000000298023228),
  DOUBLE2FP4(1.0000000596046466),
  DOUBLE2FP4(1.0000001192092967),
  DOUBLE2FP4(1.0000002384186075),
  DOUBLE2FP4(1.0000004768372719),
  DOUBLE2FP4(1.0000009536747712),
  DOUBLE2FP4(1.0000019073504518),
  DOUBLE2FP4(1.0000038147045416),
  DOUBLE2FP4(1.0000076294236351),
  DOUBLE2FP4(1.0000152589054785),
  DOUBLE2FP4(1.0000305180437910),
  DOUBLE2FP4(1.0000610370189331),
  DOUBLE2FP4(1.0001220777633837),
  DOUBLE2FP4(1.0002441704297478),
  DOUBLE2FP4(1.0004884004786945),
  DOUBLE2FP4(1.0009770394924165),
  DOUBLE2FP4(1.0019550335910028),
  DOUBLE2FP4(1.0039138893383475),
  DOUBLE2FP4(1.0078430972064480),
  DOUBLE2FP4(1.0157477085866857),
  DOUBLE2FP4(1.0317434074991028),
  DOUBLE2FP4(1.0644944589178593),
  DOUBLE2FP4(1.1331484530668263),
  DOUBLE2FP4(1.2840254166877414),
  DOUBLE2FP4(1.6487212707001282),
  DOUBLE2FP4(2.7182818284590451),
  DOUBLE2FP4(7.3890560989306504),
  DOUBLE2FP4(54.598150033144236),
  DOUBLE2FP4(2980.9579870417283),
  DOUBLE2FP4(8886110.5205078721)
};

/** Table for calc sqrt */
static const fixp4 fp4_sqrt[64] = {
  DOUBLE2FP4(46340.950006),
  DOUBLE2FP4(32767.999996),
  DOUBLE2FP4(23170.475003),
  DOUBLE2FP4(16383.999998),
  DOUBLE2FP4(11585.237502),
  DOUBLE2FP4(8191.999999),
  DOUBLE2FP4(5792.618751),
  DOUBLE2FP4(4096.000000),
  DOUBLE2FP4(2896.309375),
  DOUBLE2FP4(2048.000000),
  DOUBLE2FP4(1448.154688),
  DOUBLE2FP4(1024.000000),
  DOUBLE2FP4(724.077344),
  DOUBLE2FP4(512.000000),
  DOUBLE2FP4(362.038672),
  DOUBLE2FP4(256.000000),
  DOUBLE2FP4(181.019336),
  DOUBLE2FP4(128.000000),
  DOUBLE2FP4(90.509668),
  DOUBLE2FP4(64.000000),
  DOUBLE2FP4(45.254834),
  DOUBLE2FP4(32.000000),
  DOUBLE2FP4(22.627417),
  DOUBLE2FP4(16.000000),
  DOUBLE2FP4(11.313708),
  DOUBLE2FP4(8.000000),
  DOUBLE2FP4(5.656854),
  DOUBLE2FP4(4.000000),
  DOUBLE2FP4(2.828427),
  DOUBLE2FP4(2.000000),
  DOUBLE2FP4(1.414214),
  DOUBLE2FP4(1.000000),
  DOUBLE2FP4(0.707107),
  DOUBLE2FP4(0.500000),
  DOUBLE2FP4(0.353553),
  DOUBLE2FP4(0.250000),
  DOUBLE2FP4(0.176777),
  DOUBLE2FP4(0.125000),
  DOUBLE2FP4(0.088388),
  DOUBLE2FP4(0.062500),
  DOUBLE2FP4(0.044194),
  DOUBLE2FP4(0.031250),
  DOUBLE2FP4(0.022097),
  DOUBLE2FP4(0.015625),
  DOUBLE2FP4(0.011049),
  DOUBLE2FP4(0.007812),
  DOUBLE2FP4(0.005524),
  DOUBLE2FP4(0.003906),
  DOUBLE2FP4(0.002762),
  DOUBLE2FP4(0.001953),
  DOUBLE2FP4(0.001381),
  DOUBLE2FP4(0.000977),
  DOUBLE2FP4(0.000691),
  DOUBLE2FP4(0.000488),
  DOUBLE2FP4(0.000345),
  DOUBLE2FP4(0.000244),
  DOUBLE2FP4(0.000173),
  DOUBLE2FP4(0.000122),
  DOUBLE2FP4(0.000086),
  DOUBLE2FP4(0.000061),
  DOUBLE2FP4(0.000043),
  DOUBLE2FP4(0.000031),
  DOUBLE2FP4(0.000022),
  DOUBLE2FP4(0.000000)
};

#endif
